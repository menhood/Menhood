---
title: 通过腾讯云CDN将网站变为HTTPS访问
tags:
  - cdn
  - https
url: NaN.html
id: .nan
categories:
  - 前端
date: 2018-05-17 13:29:00
---

通过腾讯云CDN将网站变为HTTPS访问

说明
--

情况如下：  
博客在阿里云`弹性WEB托管`，但是由于购买的是基础款，并不支持部署证书实现`https`访问。  
因为七牛云和阿里云的cdn使用https没有免费额度，恰好腾讯云有月10G的cdn流量包，所以使用了腾讯云的cdn。

配置
--

下面是配置过程，比较简略

### 获取证书

因为我的域名是阿里云注册的，所以可以直接在阿里云申请三个免费ssl证书，其他途径注册均可，证书的获取途径可以[百度](http://t.cn/R3Ohg2J)

证书需要获取到 类似这种形式的`123456789.pem`和`123456789.key`两个文件，可以用Notepad++或其他编辑软件打开

### 在腾讯云上传获取到的证书

在腾讯云控制台找到[SSL证书管理](https://console.cloud.tencent.com/ssl)->上传证书->填写证书（`123456789.pem`）和私钥（`123456789.key`）

### 部署CDN

控制台->CDN->域名管理->添加域名：

表单

内容

域名

xx.menhood.wang（已上传SSL证书的域名）

所属项目

默认项目

源站类型

源站IP,`源站域名`（我是用的域名，因为弹性WEB托管没有固定IP）,对象存储（COS）

源站设置

x.menhood.wang（源站域名不能与加速域名相同，在解析的时候随便加一个二级域名指向所要访问的CNAME，这里是`x.menhood.wang`）

业务类型

静态加速（因为是博客所以选静态,业务类型一经确认，无法再修改）

缓存过期配置

所有内容 ， 0秒 （0秒即为不缓存，由于我要折腾，所以就不缓存了，反正只是为了加https，也没什么人看……）

提交，然后会提示

    添加域名完成！
    xx.menhood.wang已完成添加，系统正在为您分配CNAME。
    您还需要前往域名DNS服务商，添加CNAME记录，将请求切入CDN。

等待域名部署，分配cdn的CNAME域名，这时候可以设置下博客

部署完成后还需要设置一些东西

在域名管理页面找到刚添加的域名，点击：

    管理->高级配置->HTTPS配置->选择腾讯云托管证书->提交
    管理->高级配置->HTTPS配置->强制HTTPS访问
    管理->高级配置->HTTPS配置->HTTP2.0

### 设置博客程序

我用的是zblog，需要把后台网站设置的固定网址打开，后台固定网址也要打开，其实就是加一个 `S` 233

### 配置域名解析

在腾讯云控制台的cdn域名管理界面有当前域名的CNAME 类似于`xx.menhood.wang.cdn.dnsv1.com`

在服务商处添加CNAME指向腾讯云CDN提供的值即可

部署生效可能要等一段时间，请耐心等待