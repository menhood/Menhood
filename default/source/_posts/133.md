---
title: Linux（ubuntu）死机的处理方法之一——reisub
tags:
  - Linux
  - 命令
  - 重启
url: NaN.html
id: .nan
categories:
  - 系统
date: 2018-04-22 16:01:00
---

reisub
======

情况介绍
----

丢在家里安了Ubuntu当服务器的G480今天又遇到了死机的情况，具体原因并不知。down了半个小时还没反应过来，于是我决定强制重启。由于上次强制重启导致DPlayer-node的数据库文件损坏，这次找到了一个据说更安全点的方法——reisub

具体方法
----

### 前置条件：

键盘上有 Sysrq 键  
系统使用的内核，在编译时打开了 CONFIG\_MAGIC\_KEY选项

### 验证方法：

    grep -F CONFIG_MAGIC_SYSRQ /boot/config- uname -r

`CONFIG_MAGIC_SYSRQ=y`  
`y`表示已开启

### 系统配置Magic Sysrq Key为可用

#### 临时启用,设置/proc/sys/kernel/sysrq

    sudo echo "1" > /proc/sys/kernel/sysrq

#### 长期使用

查看 /etc/sysctl.conf，确认  
`kernel.sysrq = 1`  
如果先前为0，更改配置后使用以下方式激活  
`sysctl -p`

> ### 使用方法：
> 
> 按住alt和SysRq键的同时，再输入reisub,输入完b之后，系统自动重启。  
> 解释：按住art和SysRq键时，输入的一切都会直接交给Linux内核来处理。  
> reisub中的每一个字母都是一个独立操作，他们分别表示：  
> Alt+SysRq+R 把键盘从X手中夺过来  
> Alt+SysRq+E 终结所有进程  
> Alt+SysRq+I 强制关闭所有进程  
> Alt+SysRq+S 同步所有挂载的文件系统  
> Alt+SysRq+U 重新挂载所有的文件系统为只读  
> Alt+SysRq+B 重启
> 
> 这是在网上找到的，然而由于我是笔记本，有Fn键，所以要多按一个键，而且好像是按住了Ctrl+Alt+SysRq+r、e、i、s、u、b才生效的，不过好歹生效了，能用就行 ![](https://www.menhood.wang/owo/alu/%E8%A3%85%E5%A4%A7%E6%AC%BE.png)