---
title: 不用数据库用PHP实现在线人数统计
tags:
  - 在线人数
  - php
url: NaN.html
id: .nan
categories:
  - 前端
date: 2018-04-28 12:59:00
---

不用数据库用PHP实现在线人数统计

在线人数统计
------

基于[workerman](http://www.workerman.net/)

### 调用方法

    
    
    
    var socket = io('https://api.menhood.wang/');
    socket.on('connect', function(){socket.emit('login', '');});
    socket.on('update_online_count', function(count){$('#online-count').html(count);});
    

#### 说明

*   先引用`JQuery`，如果已引用可忽略此步，不过很多版本有兼容性问题，导致本程序不能正常运行，所以出现无法显示在线人数时可引入此版JQuery尝试；
*   引入`socket`；
*   代码中的`#online-count`为显示在线人数的元素id，根据需要自行更改

### 自建API

教程地址：[WEB消息推送框架](http://www.workerman.net/web-sender)

由于遇到了坑，回来记录一下

Github上的源码没了一个文件夹，结果clone下来一直报错找不到文件

官网Wget了一个，结果没有后缀名 喵喵喵？？？

#### 架设

##### 配置好环境，确认PHP版本大于5.3

##### 下载并解压

*   下载我改了后缀的压缩包

    wget https://api.menhood.wang/s.zip

*   或者直接官网下载:[下载地址](http://www.workerman.net/web-sender)

解压：

    unzip s.zip

##### 运行

###### 启动

    php start.php start -d

###### 停止

    php start.php stop

###### 状态

    php start.php status

* * *